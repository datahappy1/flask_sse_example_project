!function(){"use strict";function j(e,t){var n={html:"",event:[]};return void 0!==e&&void 0!==t&&(n.html=e.html+t.html,n.events=e.events.concat(t.events)),n}function w(e){return"[object Array]"===Object.prototype.toString.call(e)}function x(e,t,n,i){var a,r={events:[],html:""};if(w(t))for(var s=t.length,c=0;c<s;++c)r=j(r,x(e,t[c],n,i));else if("object"==typeof t){var o="<>";if(void 0===t[o]&&(o="tag"),void 0!==t[o]){var l=S(e,t,o,n,i),f=function(e){switch(e){case"area":case"base":case"br":case"col":case"command":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":return!0;default:return!1}}(l);r.html+="<"+l;var u,d={events:[],html:""};for(var h in t)switch(h){case"tag":case"<>":break;case"text":if(f)continue;w(v=t[h])||(u=json2html.toText(S(e,t,h,n,i)));break;case"children":case"html":if(f)continue;var v;if(w(v=t[h]))d=j(d,x(e,v,n,i));else if("function"==typeof v){var m=v.call(e,e,n,i.data);if(!w(m))switch(typeof m){case"object":void 0!==m.html&&void 0!==m.events&&(d=j(d,m));break;case"function":case"undefined":break;default:d.html+=m}}else u=S(e,t,h,n,i);break;default:var g=!1;if(2<h.length&&"on"==h.substring(0,2).toLowerCase()){if(i.events){var b={action:t[h],obj:e,data:i.data,index:n},p=(void 0,(a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)})()+a()+"-"+a()+a()+"-"+a()+a());r.events[r.events.length]={id:p,type:h.substring(2),data:b},r.html+=" json2html-event-id-"+h.substring(2)+"='"+p+"'"}g=!0}if(!g){var k,y=S(e,t,h,n,i);if(void 0!==y)k="string"==typeof y?'"'+y.replace(/"/g,"&quot;")+'"':y,r.html+=" "+h+"="+k}}f?r.html+="/>":(r.html+=">",u&&(r.html+=u),(r=j(r,d)).html+="</"+l+">")}}return r}function S(c,e,t,o,n){var i="",a=e[t];switch(typeof a){case"function":switch(typeof c){case"object":return a.call(c,c,o,n.data);case"function":case"undefined":return"";default:var r={value:c,index:o,data:n.data};return a.call(r,r,o,n.data)}break;case"string":i=new s([/\$\{([^\}\{]+)\}/],function(e,t,n){return t?e.replace(n,function(e,t){var n=t.split("."),i=c;switch(typeof c){case"object":for(var a="",r=n.length,s=0;s<r;++s){if(0<n[s].length)if(null==(i=i[n[s]]))break}return null!=i&&(a=i),a;case"function":case"undefined":return"";default:switch(t){case"value":return c;case"index":return o}}}):e}).parse(a).join("");break;default:i=a}return i}function s(e,t){if(!(this instanceof s))return new s(e,t);this.tokenizers=e.splice?e:[e],t&&(this.doBuild=t),this.parse=function(e){for(this.src=e,this.ended=!1,this.tokens=[];this.next(),!this.ended;);return this.tokens},this.build=function(e,t){e&&this.tokens.push(this.doBuild?this.doBuild(e,t,this.tkn):e)},this.next=function(){var e,t=this;t.findMin(),e=t.src.slice(0,t.min),t.build(e,!1),t.src=t.src.slice(t.min).replace(t.tkn,function(e){return t.build(e,!0),""}),t.src||(t.ended=!0)},this.findMin=function(){var e,t,n=this,i=0;for(n.min=-1,n.tkn="";void 0!==(e=n.tokenizers[i++]);)-1!=(t=n.src[e.test?"search":"indexOf"](e))&&(-1==n.min||t<n.min)&&(n.tkn=e,n.min=t);-1==n.min&&(n.min=n.src.length)}}("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this||{}).json2html={version:"1.3.0",transform:function(e,t,n){var i={events:[],html:""},a={events:!1};a=function(e,t){var n={};for(var i in e)n[i]=e[i];for(var i in t)n[i]=t[i];return n}(a,n),void 0===t&&void 0===e||(i=function(e,t,n){var i={events:[],html:""};if(w(e))for(var a=e.length,r=0;r<a;++r)i=j(i,x(e[r],t,r,n));else switch(typeof e){case"undefined":case"function":default:i=j(i,x(e,t,void 0,n))}return i}("string"==typeof e?JSON.parse(e):e,t,a));return a.events?i:i.html},toText:function(e){return null==e?"":e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;").replace(/\//g,"&#x2F;")}}}();